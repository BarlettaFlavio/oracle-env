services:
  oracle:
    image: gvenzl/oracle-free:latest
    container_name: oracle-db
    ports:
      - "1521:1521"
    environment:
      - ORACLE_PASSWORD=SecretPass123!
    volumes:
      - oracle_data:/opt/oracle/oradata
    healthcheck:
      test: ["CMD", "healthcheck.sh"]
      interval: 10s
      timeout: 5s
      retries: 10

  ords:
    # Usiamo un'immagine ORDS generica e affidabile
    image: container-registry.oracle.com/database/ords:latest
    # Nota: Se l'immagine ufficiale sopra chiede login, usa questa alternativa open source molto stabile:
    # image: gvenzl/ords-free:latest
    container_name: ords
    ports:
      - "8080:8080"
    environment:
      - ORACLE_HOST=oracle
      - ORACLE_PORT=1521
      - ORACLE_SERVICE=FREEPDB1
      - ORACLE_PWD=SecretPass123!
      - ORDS_PWD=OrdsPass123!
    depends_on:
      oracle:
        condition: service_healthy
    volumes:
      - ords_config:/etc/ords/config

volumes:
  oracle_data:
  ords_config:
